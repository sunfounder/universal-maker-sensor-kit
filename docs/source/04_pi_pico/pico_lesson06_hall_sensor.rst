.. note::

    ã“ã‚“ã«ã¡ã¯ã€SunFounder Raspberry Pi & Arduino & ESP32 Enthusiasts Communityã¸ã‚ˆã†ã“ãï¼Facebookä¸Šã§ã€ä»²é–“ã¨ä¸€ç·’ã«Raspberry Piã€Arduinoã€ESP32ã‚’ã•ã‚‰ã«æ·±ãæŽ¢æ±‚ã—ã¾ã—ã‚‡ã†ã€‚

    **ãªãœå‚åŠ ã™ã‚‹ã®ã‹ï¼Ÿ**

    - **å°‚é–€çš„ãªã‚µãƒãƒ¼ãƒˆ**ï¼šè³¼å…¥å¾Œã®å•é¡Œã‚„æŠ€è¡“çš„ãªèª²é¡Œã‚’ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚„ãƒãƒ¼ãƒ ã®åŠ©ã‘ã‚’å€Ÿã‚Šã¦è§£æ±ºã€‚
    - **å­¦ã³ã¨å…±æœ‰**ï¼šã‚¹ã‚­ãƒ«ã‚’å‘ä¸Šã•ã›ã‚‹ãŸã‚ã®ãƒ’ãƒ³ãƒˆã‚„ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’äº¤æ›ã€‚
    - **é™å®šãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼**ï¼šæ–°è£½å“ç™ºè¡¨ã‚„äºˆå‘Šç·¨ã«æ—©æœŸã‚¢ã‚¯ã‚»ã‚¹ã€‚
    - **ç‰¹åˆ¥å‰²å¼•**ï¼šæœ€æ–°è£½å“ã®ç‰¹åˆ¥å‰²å¼•ã‚’æ¥½ã—ã‚€ã€‚
    - **ãƒ•ã‚§ã‚¹ãƒ†ã‚£ãƒ–ãƒ—ãƒ­ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ã¨ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆ**ï¼šãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆã‚„ãƒ›ãƒªãƒ‡ãƒ¼ãƒ—ãƒ­ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ã«å‚åŠ ã€‚

    ðŸ‘‰ ç§ãŸã¡ã¨ä¸€ç·’ã«æŽ¢ç´¢ã¨å‰µé€ ã‚’å§‹ã‚ã‚‹æº–å‚™ã¯ã§ãã¾ã—ãŸã‹ï¼Ÿ[|link_sf_facebook|]ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã€ä»Šã™ãå‚åŠ ã—ã¾ã—ã‚‡ã†ï¼

.. _pico_lesson06_hall_sensor:

ãƒ¬ãƒƒã‚¹ãƒ³06: ãƒ›ãƒ¼ãƒ«ã‚»ãƒ³ã‚µãƒ¼ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
=====================================

ã“ã®ãƒ¬ãƒƒã‚¹ãƒ³ã§ã¯ã€Raspberry Pi Pico Wã‚’ä½¿ç”¨ã—ã¦ãƒ›ãƒ¼ãƒ«åŠ¹æžœã‚»ãƒ³ã‚µãƒ¼ã§ç£å ´ã‚’æ¸¬å®šã™ã‚‹æ–¹æ³•ã‚’å­¦ã³ã¾ã™ã€‚ã‚»ãƒ³ã‚µãƒ¼ã‚’Pico Wã«æŽ¥ç¶šã™ã‚‹ã“ã¨ã§ã€ã‚¢ãƒŠãƒ­ã‚°å€¤ã‚’èª­ã¿å–ã‚Šã€ãã‚Œã‚‰ã‚’è§£é‡ˆã—ã¦ç£æ¥µã®å­˜åœ¨ã¨ç¨®é¡žã‚’æ¤œå‡ºã™ã‚‹æ–¹æ³•ã‚’ç†è§£ã—ã¾ã™ã€‚ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯åˆå¿ƒè€…ã«æœ€é©ã§ã€MicroPythonã‚’ä½¿ç”¨ã—ã¦Raspberry Pi Pico Wã§ã®ã‚¢ãƒŠãƒ­ã‚°å…¥åŠ›å‡¦ç†ã®å®Ÿè·µçš„ãªçµŒé¨“ã‚’æä¾›ã—ã¾ã™ã€‚ã‚»ãƒ³ã‚µãƒ¼ã®è¨­å®šæ–¹æ³•ã€ãã®ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿å–ã‚Šæ–¹æ³•ã€ãŠã‚ˆã³ç£æ¥µã®ç¨®é¡žã‚’åˆ¤å®šã™ã‚‹ãŸã‚ã®æ¡ä»¶ãƒ­ã‚¸ãƒƒã‚¯ã®é©ç”¨æ–¹æ³•ã‚’å­¦ã³ã€é›»å­å·¥å­¦ã¨ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®ã‚¹ã‚­ãƒ«ã‚’å‘ä¸Šã•ã›ã¾ã™ã€‚

å¿…è¦ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
--------------------------

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€ä»¥ä¸‹ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒå¿…è¦ã§ã™ã€‚ 

å…¨ã‚»ãƒƒãƒˆã‚’è³¼å…¥ã™ã‚‹ã®ãŒä¾¿åˆ©ã§ã™ã€‚ãƒªãƒ³ã‚¯ã¯ã“ã¡ã‚‰ï¼š

.. list-table::
    :widths: 20 20 20
    :header-rows: 1

    *   - Name	
        - ITEMS IN THIS KIT
        - LINK
    *   - Universal Maker Sensor Kit
        - 94
        - |link_umsk|

ä»¥ä¸‹ã®ãƒªãƒ³ã‚¯ã‹ã‚‰å€‹åˆ¥ã«è³¼å…¥ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

.. list-table::
    :widths: 30 20
    :header-rows: 1

    *   - Component Introduction
        - Purchase Link

    *   - Raspberry Pi Pico W
        - \-
    *   - :ref:`cpn_hall`
        - \-
    *   - :ref:`cpn_breadboard`
        - |link_breadboard_buy|


é…ç·š
---------------------------

.. image:: img/Lesson_06_Hall_Sensor_Module_bb.png
    :width: 100%


ã‚³ãƒ¼ãƒ‰
---------------------------

.. code-block:: python

   import machine
   import utime
   
   # Initialize an ADC on GPIO pin 26 for Hall effect sensor readings.
   hall_sensor = machine.ADC(26)
   
   # Continuously monitor and process Hall sensor data.
   while True:
       # Read the analog value from the sensor and convert to a 16-bit integer.
       value = hall_sensor.read_u16()
       print(value, end="")  # Output the raw sensor value.
   
       # Detect and print the type of magnetic pole based on the sensor reading.
       if value >= 48000:
           print(" - South pole detected", end="")
       elif value <= 18000:
           print(" - North pole detected", end="")
   
       print()
   
       # Wait 200 milliseconds before the next sensor reading
       utime.sleep_ms(200)

ã‚³ãƒ¼ãƒ‰è§£æž
---------------------------

#. **å¿…è¦ãªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆ**:

   ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€å¿…è¦ãªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¾ã™ã€‚ ``machine`` ã¯ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã«ä½¿ç”¨ã•ã‚Œã€ ``utime`` ã¯ã‚¿ã‚¤ãƒŸãƒ³ã‚°æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚

   .. code-block:: python

      import machine
      import utime

#. **ãƒ›ãƒ¼ãƒ«ã‚»ãƒ³ã‚µãƒ¼ã®åˆæœŸåŒ–**:

   ã“ã“ã§ã¯ã€GPIOãƒ”ãƒ³26ã«ADCï¼ˆã‚¢ãƒŠãƒ­ã‚°-ãƒ‡ã‚¸ã‚¿ãƒ«ã‚³ãƒ³ãƒãƒ¼ã‚¿ï¼‰ã‚’åˆæœŸåŒ–ã—ã¾ã™ã€‚ã“ã“ã«ãƒ›ãƒ¼ãƒ«ã‚»ãƒ³ã‚µãƒ¼ãŒæŽ¥ç¶šã•ã‚Œã¦ã„ã¾ã™ã€‚ ``machine.ADC`` é–¢æ•°ã‚’ä½¿ç”¨ã—ã¦ã€ã‚»ãƒ³ã‚µãƒ¼ã‹ã‚‰ã‚¢ãƒŠãƒ­ã‚°å€¤ã‚’èª­ã¿å–ã‚Šã¾ã™ã€‚

   .. code-block:: python
   
      hall_sensor = machine.ADC(26)

#. **ã‚»ãƒ³ã‚µãƒ¼èª­ã¿å–ã‚Šã®ãƒ¡ã‚¤ãƒ³ãƒ«ãƒ¼ãƒ—**:

   ã“ã®ãƒ«ãƒ¼ãƒ—ã§ã¯ã€ ``hall_sensor.read_u16()`` ã‚’ä½¿ç”¨ã—ã¦ã‚»ãƒ³ã‚µãƒ¼ã®ã‚¢ãƒŠãƒ­ã‚°å€¤ã‚’èª­ã¿å–ã‚Šã€ãã‚Œã‚’16ãƒ“ãƒƒãƒˆã®æ•´æ•°ã«å¤‰æ›ã—ã¾ã™ã€‚ã“ã®ãƒ«ãƒ¼ãƒ—ã¯ç„¡é™ã«å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚

   .. code-block:: python

      while True:
          value = hall_sensor.read_u16()

#. **ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã®å‡¦ç†**:

   å€¤ã‚’èª­ã¿å–ã£ãŸå¾Œã€ã‚³ãƒ¼ãƒ‰ã¯ãã®å€¤ãŒç‰¹å®šã®é–¾å€¤å†…ã«åŽã¾ã‚‹ã‹ã©ã†ã‹ã‚’ãƒã‚§ãƒƒã‚¯ã—ã€ç£å ´ã®åŒ—æ¥µã¾ãŸã¯å—æ¥µãŒæ¤œå‡ºã•ã‚ŒãŸã‹ã‚’åˆ¤æ–­ã—ã¾ã™ã€‚ ``48000`` ã¨ ``18000`` ã®å€¤ã¯ã€ç•°ãªã‚‹ç£æ¥µã®å­˜åœ¨ã‚’ç¤ºã™é–¾å€¤ã§ã™ã€‚å®Ÿéš›ã®æ¡ä»¶ã«å¿œã˜ã¦ã€å—æ¥µãŠã‚ˆã³åŒ—æ¥µã‚’è¡¨ã™é–¾å€¤ã‚’èª¿æ•´ã§ãã¾ã™ã€‚

   ãƒ›ãƒ¼ãƒ«ã‚»ãƒ³ã‚µãƒ¼ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã«ã¯49Eãƒªãƒ‹ã‚¢ãƒ›ãƒ¼ãƒ«åŠ¹æžœã‚»ãƒ³ã‚µãƒ¼ãŒè£…å‚™ã•ã‚Œã¦ãŠã‚Šã€ç£å ´ã®åŒ—æ¥µãŠã‚ˆã³å—æ¥µã®æ¥µæ€§ã¨ç£å ´å¼·åº¦ã‚’ç›¸å¯¾çš„ã«æ¸¬å®šã§ãã¾ã™ã€‚49Eã¨åˆ»å°ã•ã‚ŒãŸé¢ã«ç£çŸ³ã®å—æ¥µã‚’è¿‘ã¥ã‘ã‚‹ã¨ã€é©ç”¨ã•ã‚ŒãŸç£å ´å¼·åº¦ã«æ¯”ä¾‹ã—ã¦ã‚³ãƒ¼ãƒ‰ãŒèª­ã¿å–ã‚‹å€¤ãŒç›´ç·šçš„ã«å¢—åŠ ã—ã¾ã™ã€‚é€†ã«ã€åŒ—æ¥µã‚’ã“ã®é¢ã«è¿‘ã¥ã‘ã‚‹ã¨ã€ãã®ç£å ´å¼·åº¦ã«æ¯”ä¾‹ã—ã¦ã‚³ãƒ¼ãƒ‰ãŒèª­ã¿å–ã‚‹å€¤ãŒç›´ç·šçš„ã«æ¸›å°‘ã—ã¾ã™ã€‚è©³ç´°ã«ã¤ã„ã¦ã¯ :ref:`cpn_hall` ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

   .. code-block:: python

      print(value, end="")
      if value >= 48000:
          print(" - South pole detected", end="")
      elif value <= 18000:
          print(" - North pole detected", end="")
      print()



#. **èª­ã¿å–ã‚Šé–“ã®é…å»¶**:

   ã“ã®è¡Œã¯ã€æ¬¡ã®èª­ã¿å–ã‚Šå‰ã«200ãƒŸãƒªç§’ã®é…å»¶ã‚’å°Žå…¥ã—ã€ ``utime.sleep_ms`` ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ãƒ«ãƒ¼ãƒ—ãŒé€Ÿã™ãŽã¦å‡ºåŠ›ãŒéŽå‰°ã«ãªã‚‹ã®ã‚’é˜²ãŽã¾ã™ã€‚

   .. code-block:: python

      utime.sleep_ms(200)
 


.. note::

    ã“ã‚“ã«ã¡ã¯ã€SunFounder Raspberry Pi & Arduino & ESP32 Enthusiasts Communityã¸ã‚ˆã†ã“ãï¼Facebookä¸Šã§ã€ä»²é–“ã¨ä¸€ç·’ã«Raspberry Piã€Arduinoã€ESP32ã‚’ã•ã‚‰ã«æ·±ãæ¢æ±‚ã—ã¾ã—ã‚‡ã†ã€‚

    **ãªãœå‚åŠ ã™ã‚‹ã®ã‹ï¼Ÿ**

    - **å°‚é–€çš„ãªã‚µãƒãƒ¼ãƒˆ**ï¼šè³¼å…¥å¾Œã®å•é¡Œã‚„æŠ€è¡“çš„ãªèª²é¡Œã‚’ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚„ãƒãƒ¼ãƒ ã®åŠ©ã‘ã‚’å€Ÿã‚Šã¦è§£æ±ºã€‚
    - **å­¦ã³ã¨å…±æœ‰**ï¼šã‚¹ã‚­ãƒ«ã‚’å‘ä¸Šã•ã›ã‚‹ãŸã‚ã®ãƒ’ãƒ³ãƒˆã‚„ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’äº¤æ›ã€‚
    - **é™å®šãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼**ï¼šæ–°è£½å“ç™ºè¡¨ã‚„äºˆå‘Šç·¨ã«æ—©æœŸã‚¢ã‚¯ã‚»ã‚¹ã€‚
    - **ç‰¹åˆ¥å‰²å¼•**ï¼šæœ€æ–°è£½å“ã®ç‰¹åˆ¥å‰²å¼•ã‚’æ¥½ã—ã‚€ã€‚
    - **ãƒ•ã‚§ã‚¹ãƒ†ã‚£ãƒ–ãƒ—ãƒ­ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ã¨ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆ**ï¼šãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆã‚„ãƒ›ãƒªãƒ‡ãƒ¼ãƒ—ãƒ­ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ã«å‚åŠ ã€‚

    ğŸ‘‰ ç§ãŸã¡ã¨ä¸€ç·’ã«æ¢ç´¢ã¨å‰µé€ ã‚’å§‹ã‚ã‚‹æº–å‚™ã¯ã§ãã¾ã—ãŸã‹ï¼Ÿ[|link_sf_facebook|]ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã€ä»Šã™ãå‚åŠ ã—ã¾ã—ã‚‡ã†ï¼
    
.. _uno_iot_intrusion_alert_system:

ãƒ¬ãƒƒã‚¹ãƒ³51: Blynkã«ã‚ˆã‚‹ä¾µå…¥è­¦å ±ã‚·ã‚¹ãƒ†ãƒ 
===================================================================

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€ãƒ‘ãƒƒã‚·ãƒ–èµ¤å¤–ç·šï¼ˆPIRï¼‰ã‚»ãƒ³ã‚µãƒ¼ï¼ˆHC-SR501ï¼‰ã‚’ä½¿ç”¨ã—ãŸç°¡å˜ãªãƒ›ãƒ¼ãƒ ä¾µå…¥æ¤œçŸ¥ã‚·ã‚¹ãƒ†ãƒ ã‚’ç¤ºã—ã¾ã™ã€‚
Blynkã‚¢ãƒ—ãƒªã§ã‚·ã‚¹ãƒ†ãƒ ã‚’ã€Œä¸åœ¨ã€ãƒ¢ãƒ¼ãƒ‰ã«è¨­å®šã™ã‚‹ã¨ã€PIRã‚»ãƒ³ã‚µãƒ¼ãŒå‹•ãã‚’ç›£è¦–ã—ã¾ã™ã€‚
å‹•ããŒæ¤œå‡ºã•ã‚Œã‚‹ã¨ã€Blynkã‚¢ãƒ—ãƒªã«é€šçŸ¥ãŒé€ä¿¡ã•ã‚Œã€æ½œåœ¨çš„ãªä¾µå…¥ã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«è­¦å‘Šã—ã¾ã™ã€‚



å¿…è¦ãªéƒ¨å“
--------------------------

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€ä»¥ä¸‹ã®éƒ¨å“ãŒå¿…è¦ã§ã™ã€‚

ã™ã¹ã¦ãŒæƒã£ãŸã‚­ãƒƒãƒˆã‚’è³¼å…¥ã™ã‚‹ã¨ä¾¿åˆ©ã§ã™ã€‚ãƒªãƒ³ã‚¯ã¯ã“ã¡ã‚‰ã§ã™ï¼š

.. list-table::
    :widths: 20 20 20
    :header-rows: 1

    *   - Name	
        - ITEMS IN THIS KIT
        - LINK
    *   - Universal Maker Sensor Kit
        - 94
        - |link_umsk|

ä»¥ä¸‹ã®ãƒªãƒ³ã‚¯ã‹ã‚‰å€‹åˆ¥ã«è³¼å…¥ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

.. list-table::
    :widths: 30 20
    :header-rows: 1

    *   - Component Introduction
        - Purchase Link

    *   - Arduino UNO R3 or R4
        - |link_Uno_R3_buy|
    *   - :ref:`cpn_breadboard`
        - |link_breadboard_buy|
    *   - :ref:`cpn_esp8266`
        - \-
    *   - :ref:`cpn_pir_motion`
        - \-


é…ç·š
---------------------------

.. image:: img/Lesson_51_Iot_intrusion_alert_system_uno_bb.png
    :width: 100%


Blynkã®è¨­å®š
-----------------------------

.. note::
    Blynkã«ä¸æ…£ã‚Œãªæ–¹ã¯ã€ã¾ãšã“ã‚Œã‚‰ã®2ã¤ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’èª­ã‚€ã“ã¨ã‚’å¼·ããŠå‹§ã‚ã—ã¾ã™ã€‚:ref:`iot_blynk_start`ã¯Blynkã®åˆå¿ƒè€…å‘ã‘ã‚¬ã‚¤ãƒ‰ã§ã€ESP8266ã®è¨­å®šã‚„Blynkã¸ã®ç™»éŒ²æ–¹æ³•ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚:ref:`uno_iot_Flame`ã¯ã‚·ãƒ³ãƒ—ãƒ«ãªä¾‹ã§ã™ãŒã€æ‰‹é †ã®èª¬æ˜ãŒã‚ˆã‚Šè©³ç´°ã§ã™ã€‚

**1 ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ä½œæˆ**
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

ã¾ãšã€Blynkã«ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½œæˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ä»¥ä¸‹ã®æ‰‹é †ã«å¾“ã£ã¦ **"Intrusion Alert System"**ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚

.. image:: img/02-create_template_shadow.png
    :width: 80%
    :align: center

**2 ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆãƒªãƒ¼ãƒ ã®ä½œæˆ**
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

**Datastream**ãƒšãƒ¼ã‚¸ã§ã€esp8266ãŠã‚ˆã³uno r4ãƒœãƒ¼ãƒ‰ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å—ä¿¡ã™ã‚‹ãŸã‚ã® **ä»®æƒ³ãƒ”ãƒ³** ã‚¿ã‚¤ãƒ—ã® **Datastreams**ã‚’ä½œæˆã—ã¾ã™ã€‚

* æ¬¡ã®å›³ã«å¾“ã£ã¦ä»®æƒ³ãƒ”ãƒ³V0ã‚’ä½œæˆã—ã¾ã™ï¼š

  **ä»®æƒ³ãƒ”ãƒ³V0**ã®åå‰ã‚’ **AwayMode** ã«è¨­å®šã—ã¾ã™ã€‚ **ãƒ‡ãƒ¼ã‚¿ã‚¿ã‚¤ãƒ—** ã‚’ **æ•´æ•°** ã«è¨­å®šã—ã€MINã¨MAXã‚’ **0** ãŠã‚ˆã³ **1** ã«è¨­å®šã—ã¾ã™ã€‚

  .. image:: img/02-datastream_1_shadow.png
      :width: 90%

* æ¬¡ã®å›³ã«å¾“ã£ã¦ä»®æƒ³ãƒ”ãƒ³V1ã‚’ä½œæˆã—ã¾ã™ï¼š

  **ä»®æƒ³ãƒ”ãƒ³V1**ã®åå‰ã‚’ **Current status**ã«è¨­å®šã—ã¾ã™ã€‚ **ãƒ‡ãƒ¼ã‚¿ã‚¿ã‚¤ãƒ—** ã‚’ **æ–‡å­—åˆ—** ã«è¨­å®šã—ã¾ã™ã€‚

  .. image:: img/02-datastream_2_shadow.png
      :width: 90%

ä¸Šè¨˜ã®æ‰‹é †ã«å¾“ã£ã¦2ã¤ã®ä»®æƒ³ãƒ”ãƒ³ã‚’è¨­å®šã—ãŸã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

.. image:: img/02-datastream_3_shadow.png
    :width: 100%


.. raw:: html
    
    <br/>
**3 ã‚¤ãƒ™ãƒ³ãƒˆã®ä½œæˆ**
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

æ¬¡ã«ã€ä¾µå…¥æ¤œçŸ¥ã‚’ãƒ­ã‚°ã«è¨˜éŒ²ã—ã€ãƒ¡ãƒ¼ãƒ«é€šçŸ¥ã‚’é€ä¿¡ã™ã‚‹ **ã‚¤ãƒ™ãƒ³ãƒˆ** ã‚’ä½œæˆã—ã¾ã™ã€‚

.. note::
    ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’æ­£ã—ãå®Ÿè¡Œã™ã‚‹ãŸã‚ã«ã€è¨­å®šã‚’ä¸€è²«ã—ã¦ä¿ã¤ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚ **ã‚¤ãƒ™ãƒ³ãƒˆã‚³ãƒ¼ãƒ‰** ã‚’ ``intrusion_detected`` ã«è¨­å®šã—ã¦ãã ã•ã„ã€‚

.. image:: img/02-event_1_shadow.png
    :width: 90%
    :align: center

**Notifications**ãƒšãƒ¼ã‚¸ã«ç§»å‹•ã—ã€ãƒ¡ãƒ¼ãƒ«è¨­å®šã‚’æ§‹æˆã—ã¾ã™ã€‚

.. image:: img/02-event_2_shadow.png
    :width: 90%
    :align: center

.. raw:: html
    
    <br/>

**4 Web Dashboard**
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

**Web Dashboard**ã‚’æ§‹æˆã—ã¦ã€ä¾µå…¥è­¦å ±ã‚·ã‚¹ãƒ†ãƒ ã¨é€£æºã•ã›ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

**Web Dashboard**ãƒšãƒ¼ã‚¸ã« **ã‚¹ã‚¤ãƒƒãƒã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆ** ã¨ **ãƒ©ãƒ™ãƒ«ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆ** ã‚’ãƒ‰ãƒ©ãƒƒã‚°ï¼†ãƒ‰ãƒ­ãƒƒãƒ—ã—ã¾ã™ã€‚

.. image:: img/02-web_dashboard_1_shadow.png
    :width: 100%
    :align: center

**ã‚¹ã‚¤ãƒƒãƒã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆ**ã®è¨­å®šãƒšãƒ¼ã‚¸ã§ã€ **Datastream** ã‚’ **AwayMode(V0)** ã«é¸æŠã—ã¾ã™ã€‚ã‚¹ã‚¤ãƒƒãƒãŒã‚ªãƒ³ã®æ™‚ã«ã€Œaway homeã€ã€ã‚ªãƒ•ã®æ™‚ã«ã€Œat homeã€ã¨è¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆã†ã« **ONLABEL** ã¨ **OFFLABEL** ã‚’è¨­å®šã—ã¾ã™ã€‚

.. image:: img/02-web_dashboard_2_shadow.png
    :width: 100%
    :align: center

**ãƒ©ãƒ™ãƒ«ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆ**ã®è¨­å®šãƒšãƒ¼ã‚¸ã§ã€ **Datastream** ã‚’ **Current status(V1)** ã«é¸æŠã—ã¾ã™ã€‚

.. image:: img/02-web_dashboard_3_shadow.png
    :width: 100%
    :align: center

**5 ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ä¿å­˜**
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

æœ€å¾Œã«ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä¿å­˜ã™ã‚‹ã“ã¨ã‚’å¿˜ã‚Œãªã„ã§ãã ã•ã„ã€‚

.. image:: img/02-save_template_shadow.png
    :width: 70%
    :align: center

.. raw:: html
    
    <br/>


ã‚³ãƒ¼ãƒ‰
----------------------- 

#. ``universal-maker-sensor-kit\arduino_uno\Lesson_51_Intrusion_alert_system``ã®ãƒ‘ã‚¹ã«ã‚ã‚‹ ``Lesson_51_Intrusion_alert_system.ino`` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ãã‹ã€ã“ã®ã‚³ãƒ¼ãƒ‰ã‚’ **Arduino IDE** ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã™ã€‚

   .. raw:: html
       
       <iframe src=https://create.arduino.cc/editor/sunfounder01/e94c0b5e-1fcd-46aa-bc95-0395efee1d32/preview?embed style="height:510px;width:100%;margin:10px 0" frameborder=0></iframe>

#. "Intrusion Alert System"ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½¿ç”¨ã—ã¦Blynkãƒ‡ãƒã‚¤ã‚¹ã‚’ä½œæˆã—ã¾ã™ã€‚æ¬¡ã«ã€ ``BLYNK_TEMPLATE_ID`` ã€ ``BLYNK_TEMPLATE_NAME`` ã€ãŠã‚ˆã³ ``BLYNK_AUTH_TOKEN`` ã‚’è‡ªèº«ã®ã‚‚ã®ã«ç½®ãæ›ãˆã¾ã™ã€‚

   .. code-block:: arduino
    
      #define BLYNK_TEMPLATE_ID "TMPxxxxxxx"
      #define BLYNK_TEMPLATE_NAME "Intrusion Alert System"
      #define BLYNK_AUTH_TOKEN "xxxxxxxxxxxxx"

#. ä½¿ç”¨ã—ã¦ã„ã‚‹WiFiã® ``ssid`` ã¨ ``password`` ã‚’å…¥åŠ›ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

   .. code-block:: arduino

    char ssid[] = "your_ssid";
    char pass[] = "your_password";

#. æ­£ã—ã„ãƒœãƒ¼ãƒ‰ã¨ãƒãƒ¼ãƒˆã‚’é¸æŠã—ãŸå¾Œã€ **Upload** ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚

#. ã‚·ãƒªã‚¢ãƒ«ãƒ¢ãƒ‹ã‚¿ãƒ¼ã‚’é–‹ãï¼ˆãƒœãƒ¼ãƒ¬ãƒ¼ãƒˆã‚’115200ã«è¨­å®šï¼‰ã€æ¥ç¶šæˆåŠŸã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒè¡¨ç¤ºã•ã‚Œã‚‹ã®ã‚’å¾…ã¡ã¾ã™ã€‚

   .. image:: img/02-ready_1_shadow.png
    :width: 80%
    :align: center

   .. note::

       æ¥ç¶šæ™‚ã« ``ESP is not responding`` ã¨ã„ã†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚ŒãŸå ´åˆã¯ã€æ¬¡ã®æ‰‹é †ã«å¾“ã£ã¦ãã ã•ã„ã€‚

       * 9Vãƒãƒƒãƒ†ãƒªãƒ¼ãŒæ¥ç¶šã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚
       * RSTãƒ”ãƒ³ã‚’GNDã«1ç§’é–“æ¥ç¶šã—ã¦ESP8266ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ãƒªã‚»ãƒƒãƒˆã—ã€ãã®å¾Œãƒ”ãƒ³ã‚’å¤–ã—ã¾ã™ã€‚
       * R4ãƒœãƒ¼ãƒ‰ã®ãƒªã‚»ãƒƒãƒˆãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¾ã™ã€‚

       ä¸Šè¨˜ã®æ“ä½œã‚’3ï½5å›ç¹°ã‚Šè¿”ã™å¿…è¦ãŒã‚ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã®ã§ã€å¿è€å¼·ããŠå¾…ã¡ãã ã•ã„ã€‚
ã‚³ãƒ¼ãƒ‰åˆ†æ
---------------------------

#. **è¨­å®šã¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒª**

   ã“ã“ã§ã¯ã€Blynkã®å®šæ•°ã¨èªè¨¼æƒ…å ±ã‚’è¨­å®šã—ã¾ã™ã€‚ESP8266 WiFiãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨Blynkã®å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’å«ã‚ã¾ã™ã€‚

   .. code-block:: arduino

      #define BLYNK_TEMPLATE_ID "TMPxxxx"
      #define BLYNK_TEMPLATE_NAME "Intrusion Alert System"
      #define BLYNK_AUTH_TOKEN "xxxxxx-"
      #define BLYNK_PRINT Serial

      #include <ESP8266_Lib.h>
      #include <BlynkSimpleShieldEsp8266.h>

#. **WiFiã®è¨­å®š**

   WiFiã®èªè¨¼æƒ…å ±ã‚’è¨­å®šã—ã€ESP01ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨ã®ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚·ãƒªã‚¢ãƒ«é€šä¿¡ã‚’è¨­å®šã—ã¾ã™ã€‚

   .. code-block:: arduino

      char ssid[] = "your_ssid";
      char pass[] = "your_password";

      SoftwareSerial EspSerial(2, 3);
      #define ESP8266_BAUD 115200
      ESP8266 wifi(&EspSerial);

#. **PIRã‚»ãƒ³ã‚µãƒ¼ã®è¨­å®š**

   PIRã‚»ãƒ³ã‚µãƒ¼ãŒæ¥ç¶šã•ã‚Œã¦ã„ã‚‹ãƒ”ãƒ³ã‚’å®šç¾©ã—ã€çŠ¶æ…‹å¤‰æ•°ã‚’åˆæœŸåŒ–ã—ã¾ã™ã€‚

   .. code-block:: arduino

      const int sensorPin = 8;
      int state = 0;
      int awayHomeMode = 0;
      BlynkTimer timer;

#. **setup()é–¢æ•°**

   PIRã‚»ãƒ³ã‚µãƒ¼ã‚’å…¥åŠ›ã¨ã—ã¦åˆæœŸåŒ–ã—ã€ã‚·ãƒªã‚¢ãƒ«é€šä¿¡ã‚’è¨­å®šã—ã€WiFiã«æ¥ç¶šã—ã€Blynkã‚’è¨­å®šã—ã¾ã™ã€‚

   - ``timer.setInterval(1000L, myTimerEvent)``ã‚’ä½¿ç”¨ã—ã¦ã€setup()ã§ã‚¿ã‚¤ãƒãƒ¼é–“éš”ã‚’è¨­å®šã—ã¾ã™ã€‚ã“ã“ã§ã¯ã€ ``myTimerEvent()`` é–¢æ•°ã‚’ **1000ms** ã”ã¨ã«å®Ÿè¡Œã™ã‚‹ã‚ˆã†ã«è¨­å®šã—ã¾ã™ã€‚ ``timer.setInterval(1000L, myTimerEvent)`` ã®æœ€åˆã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å¤‰æ›´ã—ã¦ã€ ``myTimerEvent`` å®Ÿè¡Œé–“éš”ã‚’å¤‰æ›´ã§ãã¾ã™ã€‚

   .. raw:: html
    
    <br/> 

   .. code-block:: arduino

      void setup() {
         pinMode(sensorPin, INPUT);
         Serial.begin(115200);
         EspSerial.begin(ESP8266_BAUD);
         delay(10);
         Blynk.config(wifi, BLYNK_AUTH_TOKEN);
         Blynk.connectWiFi(ssid, pass);
         timer.setInterval(1000L, myTimerEvent);
      }

#. **loop()é–¢æ•°**

   loopé–¢æ•°ã¯Blynkã¨Blynkã‚¿ã‚¤ãƒãƒ¼é–¢æ•°ã‚’ç¹°ã‚Šè¿”ã—å®Ÿè¡Œã—ã¾ã™ã€‚

   .. code-block:: arduino

      void loop() {
         Blynk.run();
         timer.run();
      }

#. **Blynkã‚¢ãƒ—ãƒªã¨ã®é€£æº**

   ã“ã‚Œã‚‰ã®é–¢æ•°ã¯ã€ãƒ‡ãƒã‚¤ã‚¹ãŒBlynkã«æ¥ç¶šã•ã‚ŒãŸã¨ãã€ã¾ãŸã¯Blynkã‚¢ãƒ—ãƒªã®ä»®æƒ³ãƒ”ãƒ³V0ã®çŠ¶æ…‹ãŒå¤‰åŒ–ã—ãŸã¨ãã«å‘¼ã³å‡ºã•ã‚Œã¾ã™ã€‚

   - ãƒ‡ãƒã‚¤ã‚¹ãŒBlynkã‚µãƒ¼ãƒãƒ¼ã«æ¥ç¶šã•ã‚Œã‚‹ãŸã³ã«ã€ã¾ãŸã¯ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¡ä»¶ãŒæ‚ªã„ãŸã‚ã«å†æ¥ç¶šã•ã‚Œã‚‹ãŸã³ã«ã€ ``BLYNK_CONNECTED()`` é–¢æ•°ãŒå‘¼ã³å‡ºã•ã‚Œã¾ã™ã€‚ ``Blynk.syncVirtual()`` ã‚³ãƒãƒ³ãƒ‰ã¯å˜ä¸€ã®ä»®æƒ³ãƒ”ãƒ³å€¤ã‚’è¦æ±‚ã—ã¾ã™ã€‚æŒ‡å®šã•ã‚ŒãŸä»®æƒ³ãƒ”ãƒ³ã¯ ``BLYNK_WRITE()`` å‘¼ã³å‡ºã—ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚è©³ç´°ã«ã¤ã„ã¦ã¯|link_blynk_syncing|ã‚’ã”å‚ç…§ãã ã•ã„ã€‚

   - BLYNKã‚µãƒ¼ãƒãƒ¼ã®ä»®æƒ³ãƒ”ãƒ³ã®å€¤ãŒå¤‰æ›´ã•ã‚Œã‚‹ãŸã³ã« ``BLYNK_WRITE()`` ãŒãƒˆãƒªã‚¬ãƒ¼ã•ã‚Œã¾ã™ã€‚è©³ç´°ã¯|link_blynk_write|ã‚’ã”å‚ç…§ãã ã•ã„ã€‚

   .. raw:: html
    
    <br/> 

   .. code-block:: arduino
      
      // This function is called every time the device is connected to the Blynk.Cloud
      BLYNK_CONNECTED() {
         Blynk.syncVirtual(V0);
      }
      
      // This function is called every time the Virtual Pin 0 state changes
      BLYNK_WRITE(V0) {
         awayHomeMode = param.asInt();
         // additional logic
      }

#. **ãƒ‡ãƒ¼ã‚¿å‡¦ç†**

   æ¯ç§’ã€ ``myTimerEvent()`` é–¢æ•°ã¯ ``sendData()``ã‚’å‘¼ã³å‡ºã—ã¾ã™ã€‚Blynkã§ã‚¢ã‚¦ã‚§ã‚¤ãƒ¢ãƒ¼ãƒ‰ãŒæœ‰åŠ¹ã«ãªã£ã¦ã„ã‚‹å ´åˆã€PIRã‚»ãƒ³ã‚µãƒ¼ã‚’ãƒã‚§ãƒƒã‚¯ã—ã€å‹•ããŒæ¤œå‡ºã•ã‚ŒãŸå ´åˆã¯Blynkã«é€šçŸ¥ã‚’é€ä¿¡ã—ã¾ã™ã€‚

   - ``Blynk.virtualWrite(V1, "Somebody in your house! Please check!");``ã‚’ä½¿ç”¨ã—ã¦ãƒ©ãƒ™ãƒ«ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’å¤‰æ›´ã—ã¾ã™ã€‚

   - ``Blynk.logEvent("intrusion_detected");``ã‚’ä½¿ç”¨ã—ã¦Blynkã«ã‚¤ãƒ™ãƒ³ãƒˆã‚’ãƒ­ã‚°ã—ã¾ã™ã€‚

   .. raw:: html
    
    <br/> 

   .. code-block:: arduino

      void myTimerEvent() {
         sendData();
      }

      void sendData() {
         if (awayHomeMode == 1) {
            state = digitalRead(sensorPin);  // Read the state of the PIR sensor

            Serial.print("state:");
            Serial.println(state);
        
            // If the sensor detects movement, send an alert to the Blynk app
            if (state == HIGH) {
              Serial.println("Somebody here!");
              Blynk.virtualWrite(V1, "Somebody in your house! Please check!");
              Blynk.logEvent("intrusion_detected");
            }
         }
      }


**å‚è€ƒè³‡æ–™**

- |link_blynk_doc|
- |link_blynk_quickstart| 
- |link_blynk_virtualWrite|
- |link_blynk_logEvent|
- |link_blynk_timer_intro|
- |link_blynk_syncing| 
- |link_blynk_write|